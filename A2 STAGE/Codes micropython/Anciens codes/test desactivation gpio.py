from machine import Pin, ADC, mem32
import time

Pin(43, Pin.OUT).value(1)
#Lecture de l'état des pins actuels - initialement 2 (0x00000002) :
mem32[0x50000000 + 0x700 + 0x4 + 0x4] =  0x00000002 
etat_initial_pin_02 = mem32[0x50000000 + 0x700 + 0x4 + 0x4]
mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4] = 0x00000002 
etat_initial_pin_03 = mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4]
mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4] = 0x00000002
etat_initial_pin_04 = mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4 + 0x4]
mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4 + 0x4] = 0x00000002
etat_initial_pin_05 = mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4]
mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4] = 0x00000002
etat_initial_pin_28 = mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4]
mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4] = 0x00000002
etat_initial_pin_29 = mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4] 
mem32[0x50000000 + 0x700 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4 + 0x4] = 0x00000002
print(etat_initial_pin_02)
print(etat_initial_pin_03)
print(etat_initial_pin_04)
print(etat_initial_pin_05)
print(etat_initial_pin_28)
print(etat_initial_pin_29)

#Test de l'état actuel :
i = 0
print("Test de l'état avant désactivation")
while i < 3 :
    tension_1_analog = ADC(Pin(2, Pin.IN))
    tension_1 = tension_1_analog.read_u16()
    tension_pin_2 = (tension_1 * (3.3 / 65535))
    print("tension pin 2: ", tension_pin_2)
    tension_2_analog = ADC(Pin(3, Pin.IN))
    tension_2 = tension_2_analog.read_u16()
    tension_pin_3 = (tension_2 * (3.3 / 65535))
    print("tension pin 3 :", tension_pin_3)
    i = i +1
    
#Désactivation :
mem32[0x50000000 + 0x700 + (0x4 * 2)] = 0x0
mem32[0x50000000 + 0x700 + (0x4 * 3)] = 0x0

#Test après désactivation :
i = 0
print("Test de l'état après désactivation")
while i < 3 :
    tension_1_analog = ADC(Pin(2, Pin.IN))
    tension_1 = tension_1_analog.read_u16()
    tension_pin_2 = (tension_1 * (3.3 / 65535))
    print("tension pin 2: ", tension_pin_2)
    tension_2_analog = ADC(Pin(3, Pin.IN))
    tension_2 = tension_2_analog.read_u16()
    tension_pin_3 = (tension_2 * (3.3 / 65535))
    print("tension pin 3 :", tension_pin_3)
    i = i+1





